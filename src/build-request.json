{
  "kind": "build_request",
  "title": "Rebuild clean deployment package for version 49",
  "projectName": "Crypto Market Assistant",
  "priority": "high",
  "requirements": [
    {
      "id": "REQ-5",
      "text": "Generate a clean version 49 deployment package that preserves all existing functionality from version 48 including market overview, recommendations, radar dashboard, trading opportunities with all 6 modalities (scalping, swing, breakout, reversal, SMC, FVG), order book analysis, institutional orders detection, and complete PWA features with offline support",
      "target": "both",
      "source": {
        "messageIds": [
          "msg-latest"
        ],
        "quotes": [
          "Vamos la",
          "Reconstruir do zero - Gerar uma nova versão limpa (49) sem modificações"
        ]
      },
      "acceptanceCriteria": [
        "Version 49 successfully deploys to production without deployment errors",
        "All market data fetching and display functionality works correctly",
        "Radar dashboard with anomaly detection and filtering operates as expected",
        "Trading opportunities for all 6 modalities display correctly with details panel",
        "PWA installs successfully on mobile devices with offline functionality",
        "Service worker caches assets properly and handles updates",
        "Internet Identity authentication flow works correctly",
        "All existing user preferences and AI learning features function properly"
      ]
    },
    {
      "id": "REQ-6",
      "text": "Verify backend main.mo maintains single-actor architecture with market data caching via UnifiedSnapshot, asset filtering by direction, user preferences storage with Principal-based access, and snapshot staleness management without any direct Binance API calls",
      "target": "backend",
      "source": {
        "messageIds": [
          "msg-latest"
        ]
      },
      "acceptanceCriteria": [
        "Backend compiles without errors or warnings",
        "All actor methods (getMarketData, getAssetsByDirection, getUserPreferences, setUserPreferences) remain functional",
        "No HTTP outcalls or external API integrations present in backend code",
        "Snapshot caching logic with staleness checks operates correctly"
      ]
    },
    {
      "id": "REQ-7",
      "text": "Ensure all frontend Binance Futures USD-M data fetching remains intact including market data queries, order book depth analysis, funding rates, open interest metrics, and institutional order detection with proper error handling for network issues, CORS blocks, and restricted locations",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-latest"
        ]
      },
      "acceptanceCriteria": [
        "All Binance API calls in frontend execute successfully",
        "Technical analysis enrichment with trend strength, support/resistance zones, and manipulation zones functions correctly",
        "Order book depth data displays properly for both Futures and Spot markets",
        "Error states show appropriate messages for different failure types",
        "Learning engine integration records predictions and updates accuracy metrics"
      ]
    },
    {
      "id": "REQ-8",
      "text": "Preserve all immutable frontend paths without modifications: useInternetIdentity.ts hook for authentication, useActor.ts for backend actor management, main.tsx application entry point, and all components in frontend/src/components/ui directory",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-latest"
        ]
      },
      "acceptanceCriteria": [
        "No changes made to useInternetIdentity.ts, useActor.ts, or main.tsx files",
        "UI components in frontend/src/components/ui remain untouched",
        "Internet Identity flow continues to work with existing implementation",
        "Actor creation and query invalidation logic remains unchanged"
      ]
    }
  ],
  "constraints": [
    "Do not modify any files in frontend/src/components/ui directory",
    "Do not edit useInternetIdentity.ts, useActor.ts, or main.tsx files",
    "Backend must remain single-actor architecture with no HTTP outcalls",
    "Do not change existing Binance Futures USD-M API endpoints or fetch logic",
    "Preserve all PWA manifest, service worker, and offline caching functionality",
    "Do not alter the learning engine's IndexedDB schema or prediction tracking logic"
  ],
  "nonGoals": [
    "Adding new features or functionality beyond what exists in version 48",
    "Changing the technology stack or introducing new frameworks",
    "Modifying the UI design, color scheme, or visual theme",
    "Adding new trading modalities beyond the existing 6 types",
    "Implementing new backend API methods or data structures",
    "Changing error handling patterns or user-facing error messages"
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}