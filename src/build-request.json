{
  "kind": "build_request",
  "title": "Add trade entry/exit points and stop loss calculation to Opportunities",
  "projectName": "Crypto Radar",
  "priority": "normal",
  "requirements": [
    {
      "id": "REQ-1",
      "text": "When a user selects an asset from the Opportunities list, display the optimal buy point (entry price) calculated from current market data and technical analysis already available in the frontend",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-user-opportunities-feature"
        ],
        "quotes": [
          "mostre o melhor ponto de compra"
        ]
      },
      "acceptanceCriteria": [
        "Selected opportunity shows a clearly labeled entry price",
        "Entry price is calculated using existing market data without any new backend calls",
        "Price is displayed in the OpportunityDetailsPanel component"
      ]
    },
    {
      "id": "REQ-2",
      "text": "Display the most probable sell point (take profit target) for the selected asset based on volatility, momentum, and technical indicators already computed in the frontend",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-user-opportunities-feature"
        ],
        "quotes": [
          "o ponto mais provavel de realização, ou venda"
        ]
      },
      "acceptanceCriteria": [
        "Take profit target is shown alongside the entry point",
        "Calculation uses only data already fetched from Binance in the frontend",
        "Target price reflects the opportunity type (scalping vs swing)"
      ]
    },
    {
      "id": "REQ-3",
      "text": "Calculate and display a stop loss price for the selected asset using risk management rules based on ATR, support levels, or percentage-based logic already available in frontend technical analysis",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-user-opportunities-feature"
        ],
        "quotes": [
          "E tambem o stop loss calculado"
        ]
      },
      "acceptanceCriteria": [
        "Stop loss price is clearly displayed in the details panel",
        "Calculation respects the opportunity's risk profile",
        "No new data sources are introduced; uses existing Binance data from frontend"
      ]
    },
    {
      "id": "REQ-4",
      "text": "Ensure all new entry/exit/stop loss calculations use only data already fetched by the frontend from Binance and do not trigger any new backend HTTP calls to Binance",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-user-opportunities-feature"
        ],
        "quotes": [
          "Tudo baseado nos dados que o aplicativo mantem como base de dados principal"
        ]
      },
      "acceptanceCriteria": [
        "No new HTTP outcalls to Binance are added to backend code",
        "All calculations occur in frontend using existing market data hooks",
        "Backend remains unchanged and continues only CoinGecko integration"
      ]
    }
  ],
  "constraints": [
    "Do not add any HTTP outcalls to Binance in the backend",
    "Maintain strict separation: Binance data fetching stays in frontend only",
    "Backend may only call CoinGecko and manage internal storage",
    "Use existing market data, technical analysis, and learning engine data already available in frontend hooks"
  ],
  "nonGoals": [
    "Changing the current communication architecture between frontend and backend",
    "Adding new external data sources beyond Binance (frontend) and CoinGecko (backend)",
    "Creating new backend endpoints for Binance data",
    "Modifying service worker or PWA install logic"
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}